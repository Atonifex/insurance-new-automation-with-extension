<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=400, height=500">
  <title>Insurance Autofill Agent</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <div class="logo-icon">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
        </div>
        <span class="logo-text">PolyFill Agent</span>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Site Detection -->
      <section class="section site-info">
        <div class="section-label">Current Site</div>
        <div id="siteDisplay" class="site-display">
          <span id="hostName" class="host-name">Detecting...</span>
          <span id="carrierBadge" class="carrier-badge hidden"></span>
        </div>
      </section>

      <!-- Auth Status -->
      <section id="authSection" class="section auth-section">
        <div id="authStatus" class="auth-status">
          <span class="status-dot"></span>
          <span id="authText">Checking authentication...</span>
        </div>
      </section>

      <!-- Case Selection -->
      <section id="caseSection" class="section hidden">
        <div class="section-label">Select Case</div>
        <div class="case-input-group">
          <input 
            type="text" 
            id="caseIdInput" 
            class="case-input" 
            placeholder="Enter Case ID (e.g., demo-case-1)"
            value="demo-case-1"
          />
          <button id="fetchCaseBtn" class="btn btn-secondary">Load</button>
        </div>
      </section>

      <!-- Case Details -->
      <section id="caseDetails" class="section hidden">
        <div class="case-card">
          <div class="case-header">
            <span id="clientName" class="client-name">-</span>
            <span id="caseStatus" class="status-badge">-</span>
          </div>
          <div class="case-meta">
            <span id="coverageInfo">-</span>
          </div>
        </div>
      </section>

      <!-- Status Messages -->
      <section id="statusSection" class="section hidden">
        <div id="statusMessage" class="status-message"></div>
      </section>

      <!-- Actions -->
      <section id="actionsSection" class="section hidden">
        <button id="startBtn" class="btn btn-primary btn-full">
          <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
          Start Autofill
        </button>
        <button id="pauseBtn" class="btn btn-warning btn-full hidden">
          <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Pause
        </button>
        <button id="resumeBtn" class="btn btn-success btn-full hidden">
          <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Resume
        </button>
      </section>

      <!-- Not on carrier site message -->
      <section id="notCarrierSection" class="section hidden">
        <div class="info-box">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <div>
            <p class="info-title">Not on a supported carrier portal</p>
            <p class="info-text">Navigate to iGO/iPipeline or Americo to use autofill.</p>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <a href="http://localhost:3000/cases" target="_blank" class="footer-link">
        Open Dashboard
        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
        </svg>
      </a>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>

